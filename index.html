<!doctype html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport"
        content="width=device-width, initial-scale=1.0, viewport-fit=cover, interactive-widget=resizes-content" />
    <meta name="description"
        content="The Garden Fence is an ADHD-friendly focus tool that helps you set boundaries and watch your day bloom." />
    <meta name="theme-color" content="#6F9B86" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="Garden Fence" />
    <link rel="manifest" href="manifest.webmanifest" />
    <link rel="icon" href="icons/icon.svg" type="image/svg+xml" />
    <link rel="icon" href="icons/ios/32.png" type="image/png" sizes="32x32" />
    <link rel="icon" href="icons/ios/16.png" type="image/png" sizes="16x16" />
    <link rel="apple-touch-icon" href="icons/ios/180.png" sizes="180x180" />
    <title>The Garden Fence | Boundaries & Blooms</title>
    <!-- Dyslexia-friendly font option -->
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap"
        rel="stylesheet" />
    <style>
        html {
            background: #E8F4F8;
        }

        html.night-garden {
            background: #0A1A2E;
        }
    </style>
    <script>
        (function () {
            try {
                var root = document.documentElement;

                // Apply time-of-day class to html element immediately (no flash!)
                var now = new Date();
                var hour = now.getHours();
                var timeOfDay = "night";
                if (hour >= 5 && hour < 7) timeOfDay = "dawn";
                else if (hour >= 7 && hour < 12) timeOfDay = "morning";
                else if (hour >= 12 && hour < 17) timeOfDay = "afternoon";
                else if (hour >= 17 && hour < 20) timeOfDay = "evening"; // Sunset phase ends at 8 PM

                // Apply night-garden class only for actual night time
                var isNightTime = timeOfDay === "night";
                // Set initial background color to transparent to allow garden-background to show
                root.style.backgroundColor = "transparent";
                root.classList.toggle("night-garden", isNightTime);
                root.style.colorScheme = isNightTime ? "dark" : "light";

                var meta = document.querySelector('meta[name="theme-color"]');
                if (meta) {
                    // Set theme color based on time of day
                    var themeColors = {
                        dawn: "#E8C8D8",
                        morning: "#87CEEB",
                        afternoon: "#4A90E2",
                        evening: "#FF8C42",
                        night: "#0A1A2E"
                    };
                    meta.setAttribute("content", themeColors[timeOfDay] || "#E8F4F8");
                }

                root.classList.remove("time-dawn", "time-morning", "time-afternoon", "time-evening", "time-night");
                root.classList.add("time-" + timeOfDay);

                // Apply season class to html element
                var month = now.getMonth();
                var season = "spring";
                if (month >= 2 && month < 5) season = "spring";
                else if (month >= 5 && month < 8) season = "summer";
                else if (month >= 8 && month < 11) season = "fall";
                else season = "winter";

                root.classList.remove("season-spring", "season-summer", "season-fall", "season-winter");
                root.classList.add("season-" + season);
            } catch (e) {
                // no-op
            }
        })();
    </script>
    <link rel="stylesheet" href="styles.css" />
    <link rel="stylesheet" href="styles/dayView/layout.css" />
    <link rel="stylesheet" href="styles/dayView/cards.css" />
    <link rel="stylesheet" href="styles/dayView/drag.css" />
    <link rel="stylesheet" href="styles/dayView/responsive.css" />
    <link rel="stylesheet" href="styles/dayView/simple.css" />
    <link rel="stylesheet" href="styles/dayView/planner.css" />
    <link rel="stylesheet" href="styles/mobile/home.css" />
</head>

<body>
    <!-- Garden Background -->
    <div class="garden-background" id="gardenBackground" aria-hidden="true">
        <div class="garden-sky" id="gardenSky"></div>
        <div class="garden-backdrop" id="gardenBackdrop"></div>
        <div id="gardenMidground" class="garden-midground"></div>
    </div>

    <!-- Celestial Bodies (Sun & Moon) -->
    <div class="celestial-container" aria-hidden="true">
        <div class="sun" id="sun" aria-label="Current time indicator">‚òÄÔ∏è</div>
        <div class="moon" id="moon" aria-label="Night time indicator">üåô</div>
    </div>

    <!-- Confetti Container -->
    <div class="confetti-container" id="confettiContainer" aria-hidden="true"></div>

    <!-- Focus Mode Reveal Zones (hover to show UI) -->
    <div class="focus-reveal-zone focus-reveal-top" id="focusRevealTop" aria-hidden="true"></div>
    <div class="focus-reveal-zone focus-reveal-left" id="focusRevealLeft" aria-hidden="true"></div>
    <button class="focus-handle" id="focusHandle" type="button" aria-label="Toggle focus controls" hidden></button>
    <button class="layout-handle" id="layoutHandle" type="button" aria-label="Show top bar" hidden></button>
    <button class="sidebar-handle" id="sidebarHandle" type="button" aria-label="Show sidebar" hidden></button>

    <!-- Mobile Home View (Distinct from Desktop Sidebar) -->
    <div id="mobileHomeView" class="mobile-home-view" hidden>
        <!-- Content will be populated by JS or replicated here -->
        <header class="mobile-home-header">
            <div class="logo-text">The Garden Fence</div>
            <div class="current-date-small" id="mobileDateDisplay"></div>
        </header>

        <div class="mobile-home-content">
            <!-- You Are Here -->
            <section class="mobile-card time-card">
                <div class="card-label">You Are Here</div>
                <div class="now-context-mobile" id="mobileNowContext"></div>
                <div class="time-visualization-mobile" id="mobileTimeVis"></div>
                <div class="time-stats-row" id="mobileTimeStats">
                    <!-- populated by JS -->
                </div>
            </section>

            <!-- All Goals -->
            <section class="mobile-card goals-card">
                <div class="card-label">Your Garden</div>
                <div class="goals-by-level" id="mobileGoalsByLevel">
                    <!-- populated by JS -->
                </div>
            </section>

            <!-- Daily Bloom -->
            <section class="mobile-card bloom-card">
                <div class="card-label">Daily Bloom</div>
                <div class="garden-bloom-mobile" id="mobileGardenBloom">
                    <!-- Clone of flower SVG will go here -->
                </div>
                <div class="bloom-stats-mobile">
                    <span id="mobileBloomText">Growing...</span>
                </div>
            </section>

            <!-- Affirmation -->
            <section class="mobile-card affirmation-card" id="mobileAffirmationCard">
                <div class="card-icon">‚ú®</div>
                <div class="affirmation-text-mobile" id="mobileAffirmationText">
                    "You're doing better than you think."
                </div>
            </section>

            <!-- What's Next -->
            <section class="mobile-card upcoming-card">
                <div class="card-header-row">
                    <div class="card-label">Coming Up</div>
                    <button class="btn-xs btn-ghost" id="mobileSurpriseBtn">Surprise Me</button>
                </div>
                <div id="mobileUpcomingList" class="upcoming-list-mobile"></div>
            </section>
        </div>
    </div>

    <!-- Main App -->
    <div class="app">
        <!-- Sidebar -->
        <aside class="sidebar" id="sidebar" role="complementary" aria-label="Planning sidebar">
            <button class="sidebar-hide-btn" id="hideSidebarBtn" type="button" aria-label="Hide sidebar"
                title="Hide sidebar">
                <span aria-hidden="true">‚ü®</span>
            </button>
            <!-- You Are Here - Time Blindness Support -->
            <div class="now-panel" role="region" aria-label="Current time context">
                <!-- App Title -->
                <div class="now-panel-logo">
                    <div class="logo-icon" aria-hidden="true">üå±</div>
                    <span class="logo-text">The Garden Fence</span>
                </div>
                <div class="now-label">You Are Here</div>
                <div class="now-context" id="nowContext"></div>
                <div class="now-date" id="nowDate" aria-live="polite">
                    Loading...
                </div>

                <!-- Year Progress (Relocated from Header) -->
                <!-- The Daily Bloom (Floral Progress) -->
                <div class="garden-bloom" id="gardenBloom" role="progressbar" aria-valuenow="0" aria-valuemin="0"
                    aria-valuemax="100" aria-label="Daily Bloom Progress">
                    <div class="flower-container">
                        <svg class="flower-svg" viewBox="0 0 100 100">
                            <!-- Stem -->
                            <path class="flower-stem" d="M50 95 Q50 70 50 60" fill="none" stroke="var(--sage)"
                                stroke-width="3" />
                            <!-- Petals -->
                            <g class="flower-petals" id="flowerPetals">
                                <ellipse class="petal" cx="50" cy="40" rx="10" ry="20" fill="var(--petal)" />
                                <ellipse class="petal" cx="50" cy="40" rx="10" ry="20" fill="var(--petal)"
                                    transform="rotate(72 50 60)" />
                                <ellipse class="petal" cx="50" cy="40" rx="10" ry="20" fill="var(--petal)"
                                    transform="rotate(144 50 60)" />
                                <ellipse class="petal" cx="50" cy="40" rx="10" ry="20" fill="var(--petal)"
                                    transform="rotate(216 50 60)" />
                                <ellipse class="petal" cx="50" cy="40" rx="10" ry="20" fill="var(--petal)"
                                    transform="rotate(288 50 60)" />
                            </g>
                            <!-- Center -->
                            <circle class="flower-center" cx="50" cy="60" r="6" fill="var(--sunset)" />
                        </svg>
                    </div>
                    <div class="bloom-stats">
                        <span class="bloom-label" id="yearProgressLabel">Blooming...</span>
                        <span class="bloom-value" id="yearProgressValue">0%</span>
                    </div>
                </div>
                <div class="time-stats" role="group" aria-label="Time remaining this year">
                    <div class="time-stat">
                        <div class="time-stat-value" id="daysLeft" aria-label="Days left in year">
                            --
                        </div>
                        <div class="time-stat-label">Days Left</div>
                    </div>
                    <div class="time-stat">
                        <div class="time-stat-value" id="weeksLeft" aria-label="Weeks left in year">
                            --
                        </div>
                        <div class="time-stat-label">Weeks Left</div>
                    </div>
                </div>

                <!-- Time Remaining Visualization -->
                <div class="time-garden-plot">
                    <div class="plot-label">Time Remaining Today</div>
                    <div class="time-visualization" id="timeVisualization">
                        <!-- Hour blocks populated by JS -->
                        <div class="hour-blocks" id="hourBlocks"></div>
                    </div>
                </div>

                <!-- Garden Sound Controls -->
                <div class="sound-controls">
                    <button class="sound-toggle" id="soundToggle" aria-label="Toggle ambient sounds"
                        title="Toggle garden sounds">
                        <span class="sound-icon" id="soundIcon">üîá</span>
                        <span class="sound-label">Garden Sounds</span>
                    </button>
                    <!-- Garden Sound Engine -->
                    <div id="soundVolumeContainer" class="sound-volume-container">
                        <span id="volumeLabel">50%</span>
                        <input type="range" id="soundVolume" min="0" max="100" value="50">
                    </div>
                </div>
            </div>

            <!-- Affirmation - Emotional Regulation Support -->
            <div class="sidebar-section collapsible" data-section="affirmation">
                <button class="section-toggle" aria-expanded="false" aria-controls="affirmationContent">
                    <span class="section-toggle-icon">‚ñº</span>
                    <span class="section-toggle-label">Affirmation</span>
                </button>
                <div class="section-content" id="affirmationContent">
                    <div class="affirmation-panel" id="affirmationPanel" role="button" tabindex="0"
                        aria-label="Click for a new affirmation">
                        <div class="affirmation-text" id="affirmationText" aria-live="polite">
                            "You're doing better than you think."
                        </div>
                        <div class="affirmation-hint" aria-hidden="true">
                            Click for a new affirmation
                        </div>
                    </div>
                </div>
            </div>

            <!-- What's Next - Decision Paralysis Support -->
            <div class="sidebar-section collapsible" data-section="upcoming">
                <button class="section-toggle" aria-expanded="true" aria-controls="upcomingContent">
                    <span class="section-toggle-icon">‚ñº</span>
                    <span class="section-toggle-label">Coming Up</span>
                </button>
                <div class="section-content" id="upcomingContent">
                    <div class="whats-next" role="region" aria-label="Upcoming anchors">
                        <div class="section-header">
                            <button class="pick-btn" id="pickOneBtn" aria-describedby="pick-hint">
                                Surprise me
                            </button>
                            <span id="pick-hint" class="visually-hidden">Randomly select an anchor to return to if you
                                can't
                                decide</span>
                        </div>
                        <div id="upcomingGoals" role="list" aria-label="Upcoming anchors list"></div>
                    </div>
                </div>
            </div>

            <!-- Achievements - Dopamine/Reward Support -->
            <div class="sidebar-section collapsible" data-section="achievements">
                <button class="section-toggle" aria-expanded="false" aria-controls="achievementsContent">
                    <span class="section-toggle-icon">‚ñº</span>
                    <span class="section-toggle-label">Achievements</span>
                </button>
                <div class="section-content" id="achievementsContent">
                    <div class="achievements-panel" role="region" aria-label="Your achievements">
                        <div class="achievements-grid" id="achievementsGrid" role="list" aria-label="Achievements list">
                        </div>
                    </div>
                </div>
            </div>

        </aside>

        <!-- Main Content -->
        <main class="main-content" id="main-content" role="main">
            <!-- Control Bar -->
            <div class="control-bar" role="toolbar" aria-label="Calendar controls">
                <div class="control-left">
                    <!-- View Switcher -->
                    <div class="view-switcher" role="tablist" aria-label="Zoom level">
                        <button class="view-btn" data-view="day" role="tab" aria-selected="false" aria-label="Day view">
                            Day
                        </button>
                        <button class="view-btn" data-view="week" role="tab" aria-selected="false"
                            aria-label="Week view">
                            Week
                        </button>
                        <button class="view-btn" data-view="month" role="tab" aria-selected="false"
                            aria-label="Month view">
                            Month
                        </button>
                        <button class="view-btn active" data-view="year" role="tab" aria-selected="true"
                            aria-label="Year view">
                            Year
                        </button>
                    </div>
                </div>

                <div class="control-center">
                    <!-- Date Navigation -->
                    <div class="date-nav" role="group" aria-label="Date navigation">
                        <button class="nav-btn" id="navPrev" aria-label="Previous">
                            ‚Üê
                        </button>
                        <button class="nav-btn today-btn" id="navToday" aria-label="Go to today">
                            Today
                        </button>
                        <span class="date-display" id="dateDisplay" aria-live="polite">2025</span>
                        <button class="nav-btn" id="navNext" aria-label="Next">
                            ‚Üí
                        </button>
                    </div>
                </div>

                <div class="control-right">
                    <div class="filter-group" role="group" aria-label="Scope filter">
                        <span class="filter-label" id="filter-label">Scope</span>
                        <div class="category-filters" id="categoryFilters" role="group" aria-labelledby="filter-label">
                        </div>
                    </div>
                    <button class="btn btn-ghost btn-icon support-panel-toggle-btn" id="supportPanelToggleBtn"
                        type="button" aria-label="Open support tools" title="Support Tools">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round" width="20" height="20">
                            <path d="M4 4h6v6H4z"></path>
                            <path d="M14 4h6v6h-6z"></path>
                            <path d="M4 14h6v6H4z"></path>
                            <path d="M14 14h6v6h-6z"></path>
                        </svg>
                    </button>
                </div>
            </div>

            <!-- Mobile Support Panel Button (shown only on mobile) -->
            <button class="header-mobile-support-btn support-panel-toggle-btn" id="supportPanelToggleBtnMobile"
                type="button" aria-label="Open support tools" title="Support Tools" hidden>
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round" width="20" height="20">
                    <path d="M4 4h6v6H4z"></path>
                    <path d="M14 4h6v6h-6z"></path>
                    <path d="M4 14h6v6H4z"></path>
                    <path d="M14 14h6v6h-6z"></path>
                </svg>
            </button>

            <!-- Zoomable Canvas -->
            <div class="canvas-container" id="canvasContainer">
                <div class="canvas" id="canvas">
                    <div class="calendar-grid" id="calendarGrid" role="grid" aria-label="Year calendar with anchors">
                    </div>
                    <!-- Now Beam - Visual indicator for current time in day view -->
                    <div class="now-beam" id="nowBeam" aria-hidden="true" style="display: none;"></div>
                </div>
                <div class="zoom-controls canvas-zoom-controls" role="group" aria-label="Zoom controls">
                    <button class="zoom-btn" id="zoomOut" aria-label="Zoom out">
                        ‚àí
                    </button>
                    <span class="zoom-level" id="zoomLevel" aria-live="polite">100%</span>
                    <button class="zoom-btn" id="zoomIn" aria-label="Zoom in">
                        +
                    </button>
                </div>
            </div>
        </main>
    </div>

    <!-- Add Anchor Modal -->
    <div class="modal-overlay" id="goalModal" role="dialog" aria-modal="true" aria-labelledby="goal-modal-title">
        <div class="modal">
            <div class="modal-header">
                <h2 class="modal-title" id="goal-modal-title">
                    Add New Anchor
                </h2>
                <button class="modal-close" id="closeModal" aria-label="Close modal">
                    √ó
                </button>
            </div>
            <form id="goalForm">
                <div class="form-group">
                    <label for="goalTitle">What would you like to place here?</label>
                    <input type="text" id="goalTitle" placeholder="e.g., Make space for my side project" required
                        aria-required="true" />
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="goalMonth">When?</label>
                        <select id="goalMonth" required aria-required="true"></select>
                    </div>
                    <div class="form-group">
                        <label for="goalCategory">Category (optional)</label>
                        <select id="goalCategory">
                            <option value="" selected>No category</option>
                            <option value="career">Career</option>
                            <option value="health">Health</option>
                            <option value="finance">Finance</option>
                            <option value="personal">Personal</option>
                            <option value="creative">Creative</option>
                        </select>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="goalStartTime">Start Time</label>
                        <input type="time" id="goalStartTime" />
                    </div>
                    <div class="form-group">
                        <label for="goalEndTime">End Time</label>
                        <input type="time" id="goalEndTime" />
                    </div>
                </div>
                <div class="form-group">
                    <label for="goalPriority">Priority</label>
                    <select id="goalPriority">
                        <option value="low">Low - No rush</option>
                        <option value="medium" selected>
                            Medium - When you can
                        </option>
                        <option value="high">High - Important</option>
                        <option value="urgent">Urgent - Do soon</option>
                    </select>
                </div>
                <div class="form-group" id="visionDurationGroup" style="display: none;">
                    <label for="visionDuration">Duration (months)</label>
                    <select id="visionDuration">
                        <option value="1">1 month</option>
                        <option value="2">2 months</option>
                        <option value="3">3 months</option>
                        <option value="4" selected>4 months</option>
                        <option value="5">5 months</option>
                        <option value="6">6 months</option>
                        <option value="7">7 months</option>
                        <option value="8">8 months</option>
                        <option value="9">9 months</option>
                        <option value="10">10 months</option>
                        <option value="11">11 months</option>
                        <option value="12">12 months</option>
                    </select>
                </div>
                <div class="modal-actions">
                    <button type="button" class="btn btn-ghost" id="cancelModal">
                        Cancel
                    </button>
                    <button type="submit" class="btn btn-primary">
                        Save Anchor
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- Celebration Modal - Dopamine Reward -->
    <div class="celebration-overlay" id="celebrationModal" role="dialog" aria-modal="true"
        aria-labelledby="celebration-title-label">
        <div class="celebration-content">
            <div class="celebration-icon" id="celebrationIcon" aria-hidden="true"></div>
            <div class="celebration-title" id="celebrationTitle" id="celebration-title-label">
                Amazing!
            </div>
            <div class="celebration-text" id="celebrationText">
                Anchor updated.
            </div>
            <button class="btn btn-primary" id="closeCelebration">
                Keep Going
            </button>
        </div>
    </div>

    <!-- Toast -->
    <div class="toast" id="toast" role="status" aria-live="polite">
        <span class="toast-icon" id="toastIcon" aria-hidden="true"></span>
        <span class="toast-message" id="toastMessage">Anchor placed.</span>
    </div>

    <!-- Support Tools Panel (right drawer) -->
    <div class="support-panel-overlay" id="supportPanelOverlay" hidden>
        <aside class="support-panel" id="supportPanel" role="dialog" aria-modal="true" aria-label="Support tools panel">
            <div class="support-panel-header">
                <h2 class="support-panel-title">Support Tools</h2>
                <button class="btn btn-ghost btn-icon support-panel-close" id="supportPanelClose" type="button"
                    aria-label="Close support tools">
                    <span aria-hidden="true">√ó</span>
                </button>
            </div>
            <div class="support-panel-body" role="menu" aria-label="Support tools">
                <!-- User Profile Section -->
                <div class="support-panel-profile-section" aria-label="User profile">
                    <div class="user-profile" id="supportPanelUserProfile">
                        <div class="user-avatar" id="supportPanelUserAvatar">U</div>
                        <span class="user-name" id="supportPanelUserName">User</span>
                    </div>
                    <div class="sync-status" id="supportPanelSyncStatus" title="Cloud Sync Status">
                        <span class="sync-icon">‚òÅÔ∏è</span>
                        <span class="sync-text">Local Only</span>
                    </div>
                </div>

                <div class="support-panel-divider" role="separator" aria-hidden="true"></div>

                <!-- Settings Button -->
                <button class="support-panel-item" type="button" role="menuitem" id="supportPanelSettingsBtn">
                    <span class="support-panel-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z"></path>
                            <path
                                d="M19.4 15a7.8 7.8 0 0 0 .1-1l2-1.2-2-3.5-2.3.5a7.4 7.4 0 0 0-1.7-1L15 6.5h-6l-.5 2.3a7.4 7.4 0 0 0-1.7 1l-2.3-.5-2 3.5 2 1.2a7.8 7.8 0 0 0 .1 1 7.8 7.8 0 0 0-.1 1l-2 1.2 2 3.5 2.3-.5a7.4 7.4 0 0 0 1.7 1L9 21.5h6l.5-2.3a7.4 7.4 0 0 0 1.7-1l2.3.5 2-3.5-2-1.2a7.8 7.8 0 0 0-.1-1Z">
                            </path>
                        </svg>
                    </span>
                    <span class="support-panel-text">
                        <span class="support-panel-name">Settings</span>
                        <span class="support-panel-desc">App preferences and configuration</span>
                    </span>
                </button>

                <div class="support-panel-divider" role="separator" aria-hidden="true"></div>

                <!-- Focus Mode Toggle -->
                <div class="support-panel-focus-toggle">
                    <label for="supportPanelFocusToggle" class="support-panel-focus-label"
                        id="support-panel-focus-label">
                        Focus (reduce visual noise)
                    </label>
                    <button class="toggle-switch" id="supportPanelFocusToggle" role="switch" aria-checked="false"
                        aria-labelledby="support-panel-focus-label"
                        aria-describedby="support-panel-focus-desc"></button>
                    <span class="sr-only" id="support-panel-focus-desc">Focus reduces visual noise. It doesn't track
                        productivity.</span>
                </div>

                <div class="support-panel-divider" role="separator" aria-hidden="true"></div>

                <button class="support-panel-item" type="button" role="menuitem" data-action="brainDump">
                    <span class="support-panel-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M8 18a4 4 0 1 1 0-8"></path>
                            <path d="M12 18a4 4 0 1 0 0-8"></path>
                            <path d="M8 10a4 4 0 1 1 0-8"></path>
                            <path d="M12 10a4 4 0 1 0 0-8"></path>
                            <path d="M8 18h8"></path>
                        </svg>
                    </span>
                    <span class="support-panel-text">
                        <span class="support-panel-name">Brain Dump</span>
                        <span class="support-panel-desc">Park intrusive thoughts</span>
                    </span>
                </button>

                <button class="support-panel-item" type="button" role="menuitem" data-action="bodyDouble">
                    <span class="support-panel-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <circle cx="12" cy="12" r="10"></circle>
                            <path d="M12 6v6l4 2"></path>
                        </svg>
                    </span>
                    <span class="support-panel-text">
                        <span class="support-panel-name">Body Double</span>
                        <span class="support-panel-desc">Focused work sessions</span>
                    </span>
                </button>

                <button class="support-panel-item" type="button" role="menuitem" data-action="quickWins">
                    <span class="support-panel-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M13 2 3 14h9l-1 8 10-12h-9z"></path>
                        </svg>
                    </span>
                    <span class="support-panel-text">
                        <span class="support-panel-name">Quick Wins</span>
                        <span class="support-panel-desc">Low motivation tasks</span>
                    </span>
                </button>

                <div class="support-panel-divider" role="separator" aria-hidden="true"></div>

                <button class="support-panel-item" type="button" role="menuitem" data-action="ndSettings">
                    <span class="support-panel-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 15.5a3.5 3.5 0 1 0 0-7 3.5 3.5 0 0 0 0 7Z"></path>
                            <path
                                d="M19.4 15a7.8 7.8 0 0 0 .1-1l2-1.2-2-3.5-2.3.5a7.4 7.4 0 0 0-1.7-1L15 6.5h-6l-.5 2.3a7.4 7.4 0 0 0-1.7 1l-2.3-.5-2 3.5 2 1.2a7.8 7.8 0 0 0 .1 1 7.8 7.8 0 0 0-.1 1l-2 1.2 2 3.5 2.3-.5a7.4 7.4 0 0 0 1.7 1L9 21.5h6l.5-2.3a7.4 7.4 0 0 0 1.7-1l2.3.5 2-3.5-2-1.2a7.8 7.8 0 0 0-.1-1Z">
                            </path>
                        </svg>
                    </span>
                    <span class="support-panel-text">
                        <span class="support-panel-name">Accessibility &amp; Overwhelm</span>
                        <span class="support-panel-desc">Make this calmer</span>
                    </span>
                </button>

                <button class="support-panel-item" type="button" role="menuitem" data-action="appearance">
                    <span class="support-panel-icon" aria-hidden="true">
                        <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                            stroke-linecap="round" stroke-linejoin="round">
                            <path d="M12 3v3"></path>
                            <path d="M18.36 5.64 16.24 7.76"></path>
                            <path d="M21 12h-3"></path>
                            <path d="M18.36 18.36 16.24 16.24"></path>
                            <path d="M12 21v-3"></path>
                            <path d="M5.64 18.36 7.76 16.24"></path>
                            <path d="M3 12h3"></path>
                            <path d="M5.64 5.64 7.76 7.76"></path>
                            <circle cx="12" cy="12" r="4"></circle>
                        </svg>
                    </span>
                    <span class="support-panel-text">
                        <span class="support-panel-name">Appearance</span>
                        <span class="support-panel-desc">Theme + colors</span>
                    </span>
                </button>
            </div>
        </aside>
    </div>

    <!-- Body Double Timer Display (shows when active) -->
    <div class="body-double-display" id="bodyDoubleDisplay" role="timer" aria-live="polite" hidden>
        <span class="bd-icon" aria-hidden="true"></span>
        <span class="bd-timer" id="bdTimer">25:00</span>
        <button class="bd-stop" id="bdStop" aria-label="Stop body double timer">
            Stop
        </button>
    </div>

    <button class="fab-add-anchor" id="addGoalBtn" type="button" aria-label="Add new anchor" title="Add new anchor">
        <span class="fab-icon" aria-hidden="true"></span>
    </button>

    <!-- Mobile Bottom Tab Bar -->
    <nav class="mobile-tab-bar" id="mobileTabBar" role="tablist" aria-label="Main navigation">
        <button class="mobile-tab active" data-view="home" role="tab" aria-selected="true">
            <span class="mobile-tab-icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 9.5 12 3l9 6.5V21a1 1 0 0 1-1 1h-5v-7H9v7H4a1 1 0 0 1-1-1z"></path>
                </svg>
            </span>
            <span class="mobile-tab-label">You Are Here</span>
        </button>
        <button class="mobile-tab" data-view="day" role="tab" aria-selected="false">
            <span class="mobile-tab-icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <circle cx="12" cy="12" r="4"></circle>
                    <path d="M12 2v2"></path>
                    <path d="M12 20v2"></path>
                    <path d="m4.93 4.93 1.41 1.41"></path>
                    <path d="m17.66 17.66 1.41 1.41"></path>
                    <path d="M2 12h2"></path>
                    <path d="M20 12h2"></path>
                    <path d="m6.34 17.66-1.41 1.41"></path>
                    <path d="m19.07 4.93-1.41 1.41"></path>
                </svg>
            </span>
            <span class="mobile-tab-label">Day</span>
        </button>
        <button class="mobile-tab" data-view="week" role="tab" aria-selected="false">
            <span class="mobile-tab-icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M3 3v18h18"></path>
                    <path d="M18 17V9"></path>
                    <path d="M13 17V5"></path>
                    <path d="M8 17v-7"></path>
                </svg>
            </span>
            <span class="mobile-tab-label">Week</span>
        </button>
        <button class="mobile-tab" data-view="month" role="tab" aria-selected="false">
            <span class="mobile-tab-icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M8 2v4"></path>
                    <path d="M16 2v4"></path>
                    <rect x="3" y="4" width="18" height="18" rx="2"></rect>
                    <path d="M3 10h18"></path>
                </svg>
            </span>
            <span class="mobile-tab-label">Month</span>
        </button>
        <button class="mobile-tab" data-view="year" role="tab" aria-selected="false">
            <span class="mobile-tab-icon" aria-hidden="true">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                    stroke-linejoin="round">
                    <path d="M12 22v-7"></path>
                    <path d="M5 10c0-4 3-8 7-8s7 4 7 8"></path>
                    <path d="M5 10h14"></path>
                    <path d="M6.5 14c1-2 3.1-4 5.5-4s4.5 2 5.5 4"></path>
                    <path d="M7.5 18c1-1.5 2.7-3 4.5-3s3.5 1.5 4.5 3"></path>
                </svg>
            </span>
            <span class="mobile-tab-label">Year</span>
        </button>
    </nav>

    <!-- Global Garden Effects Overlay (Particles, Butterflies, Petals) -->
    <canvas id="gardenEffects" class="garden-effects-overlay"></canvas>

    <script src="env.js"></script>
    <script src="dist/app.js"></script>
</body>

</html>