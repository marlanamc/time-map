/* ===================================
   YEAR VIEW - VISION & MILESTONE INTEGRATION
   =================================== */

.year-view {
  padding: var(--space-4);
  display: flex;
  flex-direction: column;
  gap: var(--space-4);
}

/* Layout: keep Vision in upper-left without using vertical space */
.year-view-layout {
  display: grid;
  grid-template-columns: minmax(220px, 320px) minmax(0, 1fr);
  gap: var(--space-4);
  align-items: start;
}

.year-vision-section--corner {
  position: sticky;
  top: calc(var(--space-3) + 72px);
  max-height: calc(100dvh - 140px);
  overflow: auto;
}

/* Vision Section */
.year-vision-section {
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: var(--radius-xl);
  padding: var(--space-4);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

:root:not(.dark-mode) .year-vision-section {
  background: var(--surface-1);
  border-color: var(--divider);
  box-shadow: var(--shadow-sm);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

.year-vision-header {
  display: flex;
  align-items: center;
  gap: var(--space-2);
  margin-bottom: var(--space-3);
}

.vision-icon {
  font-size: 1.5rem;
}

.year-vision-header h3 {
  margin: 0;
  font-size: var(--text-xl);
  font-weight: 700;
  color: var(--text-primary);
}

.year-vision-goals {
  display: flex;
  flex-direction: column;
  gap: var(--space-2);
}

.vision-card {
  background: rgba(139, 92, 246, 0.08); /* Purple tint for vision */
  border: 1px solid rgba(139, 92, 246, 0.2);
  border-left: 4px solid #8b5cf6; /* Vision color */
  border-radius: var(--radius-lg);
  padding: var(--space-3);
  text-align: left;
  cursor: pointer;
  transition: all 0.2s ease;
}

.vision-card:hover {
  background: rgba(139, 92, 246, 0.12);
  border-color: rgba(139, 92, 246, 0.4);
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(139, 92, 246, 0.15);
}

.vision-card:focus-visible {
  outline: 2px solid #8b5cf6;
  outline-offset: 2px;
}

.vision-card-title {
  font-size: var(--text-base);
  font-weight: 700;
  color: var(--text-primary);
  margin-bottom: var(--space-1);
}

.vision-card-desc {
  font-size: var(--text-sm);
  color: var(--text-secondary);
  line-height: 1.5;
}

/* Make Vision cards compact in the corner column */
.year-vision-section--corner .vision-card {
  padding: var(--space-2) var(--space-3);
}

.year-vision-section--corner .vision-card-desc {
  display: none;
}

/* Month Grid Enhancements */
.year-month-milestone {
  width: 100%;
  margin-top: var(--space-1);
  margin-bottom: var(--space-2);
  background: rgba(59, 130, 246, 0.08);
  border: 1px solid rgba(59, 130, 246, 0.2);
  border-left: 3px solid #3b82f6;
  border-radius: var(--radius-md);
  padding: 6px 10px;
  font-size: var(--text-sm);
  font-weight: 650;
  color: #1a2e3d;
  cursor: pointer;
  text-align: left;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
  transition: all 0.2s ease;
}

.year-month-milestone:hover {
  background: rgba(59, 130, 246, 0.12);
  border-color: rgba(59, 130, 246, 0.4);
  transform: translateY(-1px);
}

.year-month-milestone-more {
  font-size: var(--text-xs);
  color: var(--text-tertiary);
  margin-left: 6px;
}

/* Dark mode */
.dark-mode .vision-card {
  background: rgba(139, 92, 246, 0.12);
}

.dark-mode .year-month-milestone {
  background: rgba(59, 130, 246, 0.12);
  color: #e8f2f8;
}

/* Responsive */
@media (max-width: 768px) {
  .year-view-layout {
    grid-template-columns: 1fr;
  }

  .year-vision-section--corner {
    position: static;
    max-height: none;
  }

  .year-grid {
    grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
  }
}

/* ===================================
   YEAR VIEW - CENTERED VISION BANNER
   (Inserted by UIManager.renderCalendar)
   =================================== */

.year-vision-banner {
  width: min(720px, calc(100% - 64px));
  margin: 2px auto 8px;
}

.year-vision-banner--pill {
  width: auto;
  max-width: calc(100% - 64px);
  margin: 2px auto 10px;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-wrap: wrap;
  gap: 12px;
}

.year-vision-banner--pill .year-vision-pill {
  flex-direction: row;
  align-items: center;
  gap: 10px;
  padding: 10px 18px;
}

.year-vision-banner--pill .year-vision-pill-title {
  text-align: left;
  font-size: 1.1rem;
}

.year-vision-banner--pill
  .year-vision-pill:not(.year-vision-pill--empty)::before {
  content: "";
  width: 7px;
  height: 7px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--accent-highlight) 60%, transparent);
  box-shadow: 0 0 10px
      color-mix(in srgb, var(--accent-highlight) 34%, transparent),
    0 0 14px color-mix(in srgb, var(--accent-border) 22%, transparent);
}

/* Backward-compat: hide per-pill label if present */
.year-vision-banner--pill .year-vision-pill-label {
  display: none;
}

.year-vision-card,
.year-vision-empty {
  width: 100%;
  text-align: left;
  border-radius: 18px;
  padding: 18px 20px;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  box-shadow: var(--shadow-sm);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.year-vision-card {
  cursor: pointer;
  border: 1px solid var(--glass-border);
  appearance: none;
}

.year-vision-card:hover {
  transform: translateY(-1px);
  box-shadow: var(--shadow-md);
}

.year-vision-card:focus-visible {
  outline: 3px solid var(--accent-highlight);
  outline-offset: 3px;
}

:root:not(.dark-mode) .year-vision-card,
:root:not(.dark-mode) .year-vision-empty {
  background: rgba(242, 247, 246, 0.72);
  border-color: rgba(31, 45, 42, 0.08);
}

.year-vision-card--cosmic,
.year-vision-empty--cosmic,
.year-vision-pill--cosmic {
  --year-vision-ink: var(--text-primary);
  --year-vision-muted: var(--text-secondary);
  --year-vision-border-gradient: var(--accent-fill-gradient);
  --year-vision-surface-top: color-mix(
    in srgb,
    var(--glass-bg) 82%,
    var(--accent-subtle) 18%
  );
  --year-vision-surface-bottom: color-mix(
    in srgb,
    var(--glass-bg) 92%,
    var(--accent-muted) 8%
  );
  --year-vision-inner-stroke: color-mix(
    in srgb,
    var(--year-vision-ink) 12%,
    transparent
  );
  --year-vision-glow-a: color-mix(
    in srgb,
    var(--accent-border) 42%,
    transparent
  );
  --year-vision-glow-b: color-mix(in srgb, var(--accent-icon) 34%, transparent);
  --year-vision-glow-c: color-mix(
    in srgb,
    var(--accent-highlight) 28%,
    transparent
  );
  --year-vision-stars-opacity: 0.22;
  --year-vision-stars-blend: screen;
  --year-vision-title-shadow: 0 10px 26px rgba(0, 0, 0, 0.38);
  display: block;
  position: relative;
  overflow: hidden;
  border: 2px solid transparent;
  padding: 10px 12px 12px;
  background: linear-gradient(
        180deg,
        var(--year-vision-surface-top),
        var(--year-vision-surface-bottom)
      )
      padding-box,
    var(--year-vision-border-gradient) border-box;
  box-shadow: 0 0 0 1px var(--year-vision-inner-stroke) inset, var(--shadow-md),
    0 0 18px var(--year-vision-glow-b), 0 0 26px var(--year-vision-glow-a);
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
}

:root:not(.dark-mode) .year-vision-card--cosmic,
:root:not(.dark-mode) .year-vision-empty--cosmic,
:root:not(.dark-mode) .year-vision-pill--cosmic {
  --year-vision-surface-top: color-mix(
    in srgb,
    var(--bg-surface) 94%,
    var(--accent-subtle) 6%
  );
  --year-vision-surface-bottom: color-mix(
    in srgb,
    var(--bg-elevated) 96%,
    var(--accent-muted) 4%
  );
  --year-vision-glow-a: color-mix(
    in srgb,
    var(--accent-border) 18%,
    transparent
  );
  --year-vision-glow-b: color-mix(in srgb, var(--accent-icon) 14%, transparent);
  --year-vision-glow-c: color-mix(
    in srgb,
    var(--accent-highlight) 12%,
    transparent
  );
  --year-vision-stars-opacity: 0.12;
  --year-vision-stars-blend: multiply;
  --year-vision-title-shadow: 0 10px 22px rgba(0, 0, 0, 0.1);
}

:root.dark-mode .year-vision-card--cosmic,
:root.dark-mode .year-vision-empty--cosmic,
:root.dark-mode .year-vision-pill--cosmic {
  --year-vision-surface-top: color-mix(
    in srgb,
    var(--bg-base) 35%,
    var(--glass-bg) 65%
  );
  --year-vision-surface-bottom: color-mix(
    in srgb,
    var(--bg-base) 58%,
    var(--glass-bg) 42%
  );
  --year-vision-stars-opacity: 0.28;
  --year-vision-title-shadow: 0 12px 28px rgba(0, 0, 0, 0.46);
}

/* Level-specific color modifiers */
.year-vision-card--vision,
.year-vision-pill--vision {
  --year-vision-border-gradient: linear-gradient(
    135deg,
    #8b5cf6 0%,
    #a78bfa 120%
  );
  --year-vision-surface-top: color-mix(
    in srgb,
    var(--glass-bg) 82%,
    #8b5cf6 18%
  );
  --year-vision-surface-bottom: color-mix(
    in srgb,
    var(--glass-bg) 92%,
    #8b5cf6 8%
  );
  --year-vision-glow-a: color-mix(in srgb, #8b5cf6 42%, transparent);
  --year-vision-glow-b: color-mix(in srgb, #8b5cf6 34%, transparent);
  --year-vision-glow-c: color-mix(in srgb, #8b5cf6 28%, transparent);
}

.year-vision-card--milestone,
.year-vision-pill--milestone {
  --year-vision-border-gradient: linear-gradient(
    135deg,
    #3b82f6 0%,
    #60a5fa 120%
  );
  --year-vision-surface-top: color-mix(
    in srgb,
    var(--glass-bg) 82%,
    #3b82f6 18%
  );
  --year-vision-surface-bottom: color-mix(
    in srgb,
    var(--glass-bg) 92%,
    #3b82f6 8%
  );
  --year-vision-glow-a: color-mix(in srgb, #3b82f6 42%, transparent);
  --year-vision-glow-b: color-mix(in srgb, #3b82f6 34%, transparent);
  --year-vision-glow-c: color-mix(in srgb, #3b82f6 28%, transparent);
}

.year-vision-card--focus,
.year-vision-pill--focus {
  --year-vision-border-gradient: linear-gradient(
    135deg,
    #f59e0b 0%,
    #fbbf24 120%
  );
  --year-vision-surface-top: color-mix(
    in srgb,
    var(--glass-bg) 82%,
    #f59e0b 18%
  );
  --year-vision-surface-bottom: color-mix(
    in srgb,
    var(--glass-bg) 92%,
    #f59e0b 8%
  );
  --year-vision-glow-a: color-mix(in srgb, #f59e0b 42%, transparent);
  --year-vision-glow-b: color-mix(in srgb, #f59e0b 34%, transparent);
  --year-vision-glow-c: color-mix(in srgb, #f59e0b 28%, transparent);
}

/* Inherited accent (Vision color) */
.year-vision-card--cosmic[data-link-accent="1"],
.year-vision-pill--cosmic[data-link-accent="1"] {
  --year-vision-border-gradient: var(
    --link-accent-gradient,
    linear-gradient(
      135deg,
      color-mix(in srgb, var(--link-accent) 92%, white 8%) 0%,
      color-mix(in srgb, var(--link-accent) 62%, white 38%) 120%
    )
  );
  --year-vision-surface-top: color-mix(
    in srgb,
    var(--glass-bg) 82%,
    var(--link-accent) 18%
  );
  --year-vision-surface-bottom: color-mix(
    in srgb,
    var(--glass-bg) 92%,
    var(--link-accent) 8%
  );
  --year-vision-glow-a: color-mix(in srgb, var(--link-accent) 42%, transparent);
  --year-vision-glow-b: color-mix(in srgb, var(--link-accent) 34%, transparent);
  --year-vision-glow-c: color-mix(in srgb, var(--link-accent) 28%, transparent);
}

.year-vision-pill {
  position: relative;
  overflow: hidden;
  display: inline-flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  max-width: min(520px, 100%);
  padding: 10px 16px;
  border: 2px solid transparent;
  border-radius: 999px;
  cursor: pointer;
  background: linear-gradient(
        180deg,
        var(--year-vision-surface-top),
        var(--year-vision-surface-bottom)
      )
      padding-box,
    var(--year-vision-border-gradient) border-box;
  box-shadow: 0 0 0 1px var(--year-vision-inner-stroke) inset, var(--shadow-md),
    0 0 16px var(--year-vision-glow-a);
}

.year-vision-pill::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: radial-gradient(
      1px 1px at 18% 52%,
      color-mix(in srgb, var(--year-vision-ink) 32%, transparent) 0,
      transparent 2px
    ),
    radial-gradient(
      1px 1px at 32% 38%,
      color-mix(in srgb, var(--year-vision-ink) 22%, transparent) 0,
      transparent 2px
    ),
    radial-gradient(
      1px 1px at 52% 62%,
      color-mix(in srgb, var(--year-vision-ink) 18%, transparent) 0,
      transparent 2px
    ),
    radial-gradient(
      1px 1px at 74% 44%,
      color-mix(in srgb, var(--year-vision-ink) 26%, transparent) 0,
      transparent 2px
    ),
    radial-gradient(
      1px 1px at 84% 62%,
      color-mix(in srgb, var(--year-vision-ink) 18%, transparent) 0,
      transparent 2px
    );
  opacity: calc(var(--year-vision-stars-opacity) * 0.75);
  pointer-events: none;
  mix-blend-mode: var(--year-vision-stars-blend);
}

.year-vision-pill > * {
  position: relative;
  z-index: 1;
}

.year-vision-pill:hover {
  transform: translateY(-1px);
  box-shadow: 0 0 0 1px var(--year-vision-inner-stroke) inset, var(--shadow-lg),
    0 0 18px var(--year-vision-glow-b), 0 0 24px var(--year-vision-glow-a);
}

.year-vision-pill:focus-visible {
  outline: 3px solid
    color-mix(in srgb, var(--accent-highlight) 70%, transparent);
  outline-offset: 4px;
}

.year-vision-pill-label {
  display: inline-flex;
  align-items: center;
  gap: 8px;
  font-family: var(--font-display);
  font-size: 0.82rem;
  font-weight: 850;
  letter-spacing: 0.12em;
  text-transform: uppercase;
  color: color-mix(in srgb, var(--year-vision-ink) 82%, transparent);
  white-space: nowrap;
}

.year-vision-pill-dot {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--accent-highlight) 55%, transparent);
  box-shadow: 0 0 10px
      color-mix(in srgb, var(--accent-highlight) 32%, transparent),
    0 0 14px color-mix(in srgb, var(--accent-border) 28%, transparent);
}

.year-vision-pill-title {
  font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
  font-style: italic;
  font-size: 1.15rem;
  font-weight: 520;
  letter-spacing: 0.02em;
  color: color-mix(in srgb, var(--year-vision-ink) 96%, transparent);
  text-shadow: var(--year-vision-title-shadow);
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
  word-wrap: break-word;
  text-align: center;
  line-height: 1.2;
}

.year-vision-pill--empty .year-vision-pill-title {
  font-family: var(--font-display);
  font-style: normal;
  font-weight: 750;
  letter-spacing: 0.02em;
}

.year-vision-card--cosmic::before,
.year-vision-empty--cosmic::before {
  content: "";
  position: absolute;
  inset: -2px;
  background: radial-gradient(
      260px 120px at 18% 24%,
      color-mix(in srgb, var(--accent-border) 24%, transparent),
      transparent 70%
    ),
    radial-gradient(
      220px 120px at 86% 26%,
      color-mix(in srgb, var(--accent-highlight) 18%, transparent),
      transparent 70%
    ),
    radial-gradient(
      300px 180px at 60% 110%,
      color-mix(in srgb, var(--accent-icon) 16%, transparent),
      transparent 70%
    );
  filter: blur(2px);
  opacity: 0.9;
  pointer-events: none;
}

.year-vision-card--cosmic::after,
.year-vision-empty--cosmic::after {
  content: "";
  position: absolute;
  inset: 0;
  background-image: radial-gradient(
      1px 1px at 12% 22%,
      color-mix(in srgb, var(--year-vision-ink) 40%, transparent) 0,
      transparent 2px
    ),
    radial-gradient(
      1px 1px at 22% 64%,
      color-mix(in srgb, var(--year-vision-ink) 32%, transparent) 0,
      transparent 2px
    ),
    radial-gradient(
      1px 1px at 36% 30%,
      color-mix(in srgb, var(--year-vision-ink) 28%, transparent) 0,
      transparent 2px
    ),
    radial-gradient(
      1px 1px at 44% 58%,
      color-mix(in srgb, var(--year-vision-ink) 22%, transparent) 0,
      transparent 2px
    ),
    radial-gradient(
      1px 1px at 58% 26%,
      color-mix(in srgb, var(--year-vision-ink) 30%, transparent) 0,
      transparent 2px
    ),
    radial-gradient(
      1px 1px at 66% 52%,
      color-mix(in srgb, var(--year-vision-ink) 24%, transparent) 0,
      transparent 2px
    ),
    radial-gradient(
      1px 1px at 78% 36%,
      color-mix(in srgb, var(--year-vision-ink) 34%, transparent) 0,
      transparent 2px
    ),
    radial-gradient(
      1px 1px at 86% 70%,
      color-mix(in srgb, var(--year-vision-ink) 20%, transparent) 0,
      transparent 2px
    );
  opacity: var(--year-vision-stars-opacity);
  pointer-events: none;
  mix-blend-mode: var(--year-vision-stars-blend);
}

.year-vision-card--cosmic > *,
.year-vision-empty--cosmic > * {
  position: relative;
  z-index: 1;
}

.year-vision-top {
  display: flex;
  align-items: center;
  justify-content: space-between;
  gap: 12px;
}

.year-vision-card--cosmic .year-vision-top {
  align-items: center;
  justify-content: center;
}

.year-vision-label {
  display: inline-flex;
  align-items: baseline;
  gap: 6px;
  font-family: var(--font-display);
  font-size: clamp(15px, 2.4vw, 26px);
  font-weight: 850;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: color-mix(in srgb, var(--year-vision-ink) 86%, transparent);
}

.year-vision-year {
  letter-spacing: 0.04em;
}

.year-vision-word {
  opacity: 0.98;
}

.year-vision-meta {
  display: flex;
  align-items: center;
  gap: 8px;
  opacity: 0.92;
  color: var(--year-vision-muted);
  font-size: 0.75rem;
  font-weight: 650;
}

.year-vision-card--cosmic .year-vision-meta {
  margin-top: 4px;
}

.year-vision-count {
  padding: 3px 8px;
  border-radius: 999px;
  background: color-mix(in srgb, var(--year-vision-ink) 10%, transparent);
  border: 1px solid color-mix(in srgb, var(--year-vision-ink) 16%, transparent);
  color: color-mix(in srgb, var(--year-vision-ink) 82%, transparent);
  letter-spacing: 0.01em;
}

.year-vision-more {
  padding: 2px 8px;
  border-radius: var(--radius-full);
  background: rgba(0, 0, 0, 0.06);
  color: var(--text-primary);
  font-weight: 700;
}

.year-vision-card--cosmic .year-vision-more {
  background: rgba(255, 255, 255, 0.1);
  color: rgba(255, 255, 255, 0.92);
}

.dark-mode .year-vision-more {
  background: rgba(255, 255, 255, 0.1);
  color: var(--text-primary);
}

.year-vision-edit {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 22px;
  height: 22px;
  border-radius: 999px;
  color: color-mix(in srgb, var(--year-vision-ink) 88%, transparent);
  background: color-mix(in srgb, var(--year-vision-ink) 10%, transparent);
  border: 1px solid color-mix(in srgb, var(--year-vision-ink) 16%, transparent);
  transition: transform 140ms var(--ease-out),
    background-color 140ms var(--ease-out), border-color 140ms var(--ease-out);
}

.year-vision-edit svg {
  width: 14px;
  height: 14px;
}

.year-vision-card--cosmic:hover .year-vision-edit {
  background: color-mix(in srgb, var(--year-vision-ink) 14%, transparent);
  border-color: color-mix(in srgb, var(--year-vision-ink) 22%, transparent);
  transform: translateY(-1px);
}

.year-vision-empty--cosmic .year-vision-label,
.year-vision-card--cosmic .year-vision-label {
  width: 100%;
  justify-content: center;
}

.year-vision-main {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 6px;
  margin-top: 6px;
}

.year-vision-title {
  font-family: ui-serif, Georgia, "Times New Roman", Times, serif;
  font-style: italic;
  font-size: clamp(20px, 3.2vw, 38px);
  font-weight: 520;
  letter-spacing: 0.02em;
  color: color-mix(in srgb, var(--year-vision-ink) 96%, transparent);
  text-shadow: var(--year-vision-title-shadow);
  text-align: center;
  white-space: normal;
  overflow: visible;
  text-overflow: clip;
  max-width: min(520px, 78vw);
  line-height: 1.05;
}

.year-vision-rule {
  flex: 0 0 auto;
  width: min(320px, 55%);
  height: 1px;
  border-radius: 999px;
  background: linear-gradient(
    90deg,
    color-mix(in srgb, var(--year-vision-ink) 12%, transparent),
    color-mix(in srgb, var(--year-vision-ink) 28%, transparent),
    color-mix(in srgb, var(--year-vision-ink) 10%, transparent)
  );
  opacity: 0.9;
}

.year-vision-desc {
  margin-top: 6px;
  color: var(--text-secondary);
  line-height: 1.5;
}

.year-vision-card--cosmic .year-vision-desc,
.year-vision-empty--cosmic .year-vision-desc {
  text-align: center;
  color: var(--year-vision-muted);
}

.year-vision-card--cosmic .year-vision-desc {
  display: none;
}

.year-vision-card--cosmic:hover {
  transform: translateY(-1px);
  box-shadow: 0 0 0 1px var(--year-vision-inner-stroke) inset, var(--shadow-lg),
    0 0 22px var(--year-vision-glow-b), 0 0 30px var(--year-vision-glow-a),
    0 0 18px var(--year-vision-glow-c);
}

.year-vision-card--cosmic:focus-visible {
  outline: 3px solid
    color-mix(in srgb, var(--accent-highlight) 70%, transparent);
  outline-offset: 4px;
}

.year-vision-card--mini.year-vision-card--cosmic {
  padding: 8px 10px 9px;
  border-radius: 16px;
}

.year-vision-card--mini.year-vision-card--cosmic::after {
  opacity: calc(var(--year-vision-stars-opacity) * 0.7);
}

.year-vision-card--mini .year-vision-label {
  font-size: 0.78rem;
  letter-spacing: 0.08em;
}

.year-vision-card--mini .year-vision-main {
  margin-top: 6px;
  gap: 0;
}

.year-vision-card--mini .year-vision-title {
  font-size: 1.05rem;
  font-style: italic;
  max-width: 100%;
}

.year-add-vision-btn {
  /* Styling handled by .year-vision-icon-only */
}

.year-vision-empty--cosmic .year-add-vision-btn {
  display: block;
  margin-left: auto;
  margin-right: auto;
}

@media (max-width: 900px) {
  .year-vision-banner {
    width: calc(100% - 32px);
    margin: 2px auto 8px;
  }

  .year-vision-banner--pill {
    max-width: calc(100% - 32px);
  }

  .year-vision-card--cosmic,
  .year-vision-empty--cosmic {
    padding: 10px 10px 12px;
  }

  .year-vision-main {
    gap: 6px;
  }

  .year-vision-title {
    max-width: min(420px, 82vw);
  }

  /* Allow pill title to wrap on mobile */
  .year-vision-pill {
    flex-wrap: wrap;
    max-width: 100%;
  }

  .year-vision-pill-title {
    white-space: normal;
    overflow: visible;
    text-overflow: clip;
    word-wrap: break-word;
    hyphens: auto;
  }
}

@media (max-width: 560px) {
  .year-vision-banner--pill {
    justify-content: flex-start;
    flex-wrap: nowrap;
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
    padding: 2px 6px 10px;
    gap: 10px;
  }

  .year-vision-pill {
    flex: 0 0 auto;
  }
}

/* ===================================
   YEAR VISION - HERO CARD REDESIGN
   =================================== */

.year-vision-hero-container {
  width: min(760px, calc(100% - 32px));
  margin: var(--space-3) auto 24px;
  display: flex;
  flex-direction: column;
  gap: 16px;
}

.year-vision-hero-card {
  position: relative;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: 32px 24px;
  background: var(--glass-bg);
  border-radius: 28px;
  cursor: pointer;
  overflow: hidden;
  transition: all 0.25s cubic-bezier(0.2, 0.8, 0.2, 1);

  /* Reuse cosmic branding variables */
  --vision-ink: var(--text-primary);
  --vision-surface-top: color-mix(
    in srgb,
    var(--bg-surface) 90%,
    var(--accent-subtle) 10%
  );
  --vision-surface-bottom: color-mix(
    in srgb,
    var(--bg-elevated) 92%,
    var(--accent-muted) 8%
  );
  --vision-border: color-mix(in srgb, var(--accent-border) 40%, transparent);

  background: linear-gradient(
    180deg,
    var(--vision-surface-top),
    var(--vision-surface-bottom)
  );
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.1),
    0 4px 20px rgba(0, 0, 0, 0.04), 0 1px 3px rgba(0, 0, 0, 0.02);
  border: 1px solid var(--vision-border);
}

.dark-mode .year-vision-hero-card {
  --vision-surface-top: color-mix(
    in srgb,
    var(--bg-base) 40%,
    var(--glass-bg) 60%
  );
  --vision-surface-bottom: color-mix(
    in srgb,
    var(--bg-base) 60%,
    var(--glass-bg) 40%
  );
  --vision-border: rgba(255, 255, 255, 0.08);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.05),
    0 8px 32px rgba(0, 0, 0, 0.2);
}

/* Hover effects */
.year-vision-hero-card:hover {
  transform: translateY(-2px) scale(1.005);
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.2),
    0 12px 40px rgba(0, 0, 0, 0.08);
}

.year-vision-hero-card:active {
  transform: translateY(0) scale(0.995);
}

.year-vision-hero-label {
  font-family: var(--font-display);
  font-size: 0.85rem;
  text-transform: uppercase;
  letter-spacing: 0.12em;
  font-weight: 800;
  color: var(--accent-text); /* Use accent color for label */
  margin-bottom: 12px;
  display: flex;
  align-items: center;
  gap: 8px;
  opacity: 0.9;
}

.year-vision-hero-label::before,
.year-vision-hero-label::after {
  content: "";
  display: inline-block;
  width: 24px;
  height: 1px;
  background: currentColor;
  opacity: 0.4;
}

.year-vision-hero-title {
  font-family: ui-serif, Georgia, Cambria, "Times New Roman", Times, serif;
  font-size: clamp(1.5rem, 4vw, 2.2rem);
  line-height: 1.2;
  font-weight: 500;
  font-style: italic;
  text-align: center;
  color: var(--text-primary);
  max-width: var(--container-xl);
  text-wrap: balance;
}

/* Empty State */
.year-vision-hero-card--empty {
  border-style: dashed;
  background: transparent;
  padding: 24px;
}

.year-vision-hero-card--empty .year-vision-hero-title {
  font-family: var(--font-display);
  font-style: normal;
  font-size: 1.2rem;
  opacity: 0.7;
}

/* Mobile Responsiveness */
@media (max-width: 600px) {
  .year-vision-hero-container {
    width: calc(100% - 24px);
    margin: 8px auto 20px;
  }

  .year-vision-hero-card {
    padding: 24px 16px;
    border-radius: 20px;
  }

  .year-vision-hero-title {
    font-size: 1.35rem;
  }
}

/* ===================================
   MOBILE ICON-ONLY VIEWS
   =================================== */

/* Icon-Only Button (for mobile context banners) */
.year-vision-icon-only {
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 56px;
  height: 56px;
  padding: 0;
  background: var(--glass-bg);
  border: 1px solid var(--glass-border);
  border-radius: 50%;
  cursor: pointer;
  transition: all 0.2s ease;
  box-shadow: var(--shadow-sm);
  position: relative;
}

.year-vision-icon-only:hover {
  transform: scale(1.05);
  box-shadow: var(--shadow-md);
}

.year-vision-icon-only--empty:hover {
  border-color: var(--accent-button);
  background: var(--accent-subtle);
  color: var(--accent-button);
}

.year-vision-icon-only:active {
  transform: scale(0.98);
}

.year-vision-icon-only--empty {
  border-style: dashed;
  background: transparent;
  border-color: var(--accent-stroke);
  color: var(--accent);
}

.vision-icon-large {
  font-size: 1.8rem;
  line-height: 1;
}

.vision-icon-badge {
  position: absolute;
  bottom: -4px;
  right: -4px;
  background: var(--accent);
  color: white;
  font-size: 0.65rem;
  font-weight: 700;
  padding: 2px 6px;
  border-radius: 10px;
  box-shadow: var(--shadow-sm);
}

 :root:not(.dark-mode) .year-view-container .month-card {
  color: #0A1113;
 }

 :root:not(.dark-mode) .year-view-container .month-card .month-context,
 :root:not(.dark-mode) .year-view-container .month-card .month-progress-label,
 :root:not(.dark-mode) .year-view-container .month-card .month-meta {
  color: #2D3F44;
 }

 :root:not(.dark-mode) .year-view-container .goal-item.goal-item--month-milestone .goal-title,
 :root:not(.dark-mode) .year-view-container .goal-item.goal-item--month-milestone .goal-title-text {
  color: #0A1113;
 }

 :root.dark-mode.time-dawn .year-view-container .month-card,
 :root.dark-mode.time-morning .year-view-container .month-card,
 :root.dark-mode.time-afternoon .year-view-container .month-card,
 :root.dark-mode.time-evening .year-view-container .month-card {
  color: #0D1517 !important;
 }

 :root.dark-mode.time-dawn .year-view-container .month-card .month-name,
 :root.dark-mode.time-morning .year-view-container .month-card .month-name,
 :root.dark-mode.time-afternoon .year-view-container .month-card .month-name,
 :root.dark-mode.time-evening .year-view-container .month-card .month-name,
 :root.dark-mode.time-dawn .year-view-container .month-card .goal-title,
 :root.dark-mode.time-morning .year-view-container .month-card .goal-title,
 :root.dark-mode.time-afternoon .year-view-container .month-card .goal-title,
 :root.dark-mode.time-evening .year-view-container .month-card .goal-title,
 :root.dark-mode.time-dawn .year-view-container .month-card .goal-title-text,
 :root.dark-mode.time-morning .year-view-container .month-card .goal-title-text,
 :root.dark-mode.time-afternoon .year-view-container .month-card .goal-title-text,
 :root.dark-mode.time-evening .year-view-container .month-card .goal-title-text {
  color: #0D1517 !important;
 }

 :root.dark-mode.time-dawn .year-view-container .month-card .month-context,
 :root.dark-mode.time-morning .year-view-container .month-card .month-context,
 :root.dark-mode.time-afternoon .year-view-container .month-card .month-context,
 :root.dark-mode.time-evening .year-view-container .month-card .month-context,
 :root.dark-mode.time-dawn .year-view-container .month-card .month-time-detail,
 :root.dark-mode.time-morning .year-view-container .month-card .month-time-detail,
 :root.dark-mode.time-afternoon .year-view-container .month-card .month-time-detail,
 :root.dark-mode.time-evening .year-view-container .month-card .month-time-detail,
 :root.dark-mode.time-dawn .year-view-container .month-card .month-progress-label,
 :root.dark-mode.time-morning .year-view-container .month-card .month-progress-label,
 :root.dark-mode.time-afternoon .year-view-container .month-card .month-progress-label,
 :root.dark-mode.time-evening .year-view-container .month-card .month-progress-label,
 :root.dark-mode.time-dawn .year-view-container .month-card .month-meta,
 :root.dark-mode.time-morning .year-view-container .month-card .month-meta,
 :root.dark-mode.time-afternoon .year-view-container .month-card .month-meta,
 :root.dark-mode.time-evening .year-view-container .month-card .month-meta,
 :root.dark-mode.time-dawn .year-view-container .goal-item.goal-item--month-milestone .month-goal-meta,
 :root.dark-mode.time-morning .year-view-container .goal-item.goal-item--month-milestone .month-goal-meta,
 :root.dark-mode.time-afternoon .year-view-container .goal-item.goal-item--month-milestone .month-goal-meta,
 :root.dark-mode.time-evening .year-view-container .goal-item.goal-item--month-milestone .month-goal-meta {
  color: #2D3F44 !important;
 }

 :root.dark-mode.time-dawn .year-view-container .goal-item.goal-item--month-milestone .month-goal-meta-chip,
 :root.dark-mode.time-morning .year-view-container .goal-item.goal-item--month-milestone .month-goal-meta-chip,
 :root.dark-mode.time-afternoon .year-view-container .goal-item.goal-item--month-milestone .month-goal-meta-chip,
 :root.dark-mode.time-evening .year-view-container .goal-item.goal-item--month-milestone .month-goal-meta-chip {
  background: rgba(10, 17, 19, 0.10);
 }

/* Mobile Year Vision Header */
.year-vision-hero-header {
  text-align: center;
  margin-bottom: 16px;
}

/* Mobile Year Vision Icons Grid */
.year-vision-icons-grid {
  display: flex;
  flex-wrap: wrap;
  justify-content: center;
  gap: 12px;
}

/* Desktop Vision Card Icon */
.year-vision-card-icon {
  font-size: 2.5rem;
  margin-bottom: 12px;
}

/* Desktop Hero Cards Container */
.year-vision-hero-cards {
  display: flex;
  flex-direction: column;
  gap: 16px;
}

/* Pill Icon (for desktop with icon + text) */
.year-vision-pill-icon {
  font-size: 1.2rem;
  margin-right: 4px;
}

/* Added for alignment with Week/Month views */
.year-view-header {
  text-align: center;
  margin-bottom: var(--space-2);
}

.year-view-title {
  font-family: var(--font-display);
  font-size: clamp(2rem, 6vw, 3rem);
  font-weight: 700;
  letter-spacing: -0.04em;
  color: var(--text-primary);
  margin: 0;
}

.year-vision-hero-container {
  margin-top: var(--space-3);
  display: flex;
  justify-content: center;
}
